<!DOCTYPE html>
<html>
<head>
	<title>Ozy</title>
</head>
<body>
	<table>
		<tr>
			<td><strong>Name</strong></td>
			<td><span id="name"></span></td>
		</tr>
		<tr>
			<td><strong>Alignment</strong></td>
			<td><span id="alignment"></span></td>
		</tr>
		<tr>
			<td><strong>Level</strong></td>
			<td><span id="level"></span></td>
		</tr>
		<tr>
			<td><strong>Diety</strong></td>
			<td><span id="diety"></span></td>
		</tr>
		<tr>
			<td><strong>Homeland</strong></td>
			<td><span id="homeland"></span></td>
		</tr>
		<tr>
			<td><strong>Race</strong></td>
			<td><span id="race"></span></td>
		</tr>
		<tr>
			<td><strong>Size</strong></td>
			<td><span id="size"></span></td>
		</tr>
		<tr>
			<td><strong>Gender</strong></td>
			<td><span id="gender"></span></td>
		</tr>
		<tr>
			<td><strong>Age</strong></td>
			<td><span id="age"></span></td>
		</tr>
		<tr>
			<td><strong>Height</strong></td>
			<td><span id="height"></span></td>
		</tr>
		<tr>
			<td><strong>Weight</strong></td>
			<td><span id="weight"></span></td>
		</tr>
		<tr>
			<td><strong>Hair</strong></td>
			<td><span id="hair"></span></td>
		</tr>
		<tr>
			<td><strong>Eyes</strong></td>
			<td><span id="eyes"></span></td>
		</tr>
	</table>
	<hr/>
	<table>
		<tr>
			<th>Name</th>
			<th>Score</th>
			<th>Modifier</th>
		</tr>
		<tr>
			<td><strong>[STR] (strength)</strong></td>
			<td><span id="str">0</span></td>
			<td><span id="str-mod">0</span></td>
		</tr>
		<tr>
			<td><strong>[DEX] (dexterity)</strong></td>
			<td><span id="dex">0</span></td>
			<td><span id="dex-mod">0</span></td>
		</tr>
		<tr>
			<td><strong>[CON] (constitution)</strong></td>
			<td><span id="con">0</span></td>
			<td><span id="con-mod">0</span></td>
		</tr>
		<tr>
			<td><strong>[INT] (intelligence)</strong></td>
			<td><span id="int">0</span></td>
			<td><span id="int-mod">0</span></td>
		</tr>
		<tr>
			<td><strong>[WIS] (wisdom)</strong></td>
			<td><span id="wis">0</span></td>
			<td><span id="wis-mod">0</span></td>
		</tr>
		<tr>
			<td><strong>[CHA] (charisma)</strong></td>
			<td><span id="cha">0</span></td>
			<td><span id="cha-mod">0</span></td>
		</tr>
	</table>
	<hr/>
	<table>
		<tr>
			<th>Equiptment</th>
			<th>Score</th>
			<th>Modifier</th>
		</tr>
		<tr>
			<td><strong>[STR] (strength)</strong></td>
			<td><span id="str">0</span></td>
			<td><span id="str-mod">0</span></td>
		</tr>
	</table>
</body>

<script type="text/javascript">
	p = {};
	
	p.name = "-";
	p.alignment = "-";
	p.level = -1;
	p.diety = "-";
	p.homeland = "-";
	p.race = "-";
	p.size = "-";
	p.gender = "-";
	p.age = -1;      // In years
	p.height = -1;   // In inches
	p.weight = -1;   // in pounds
	p.hair = "-";
	p.eyes = "-";

	p.str = -1;
	p.dex = -1;
	p.con = -1;
	p.int = -1;
	p.wis = -1;
	p.cha = -1;

	p.speed = -1;
	p.hp = -1;

	p.equipment = [];
	p.weapons = [];

	function getId(id) {
		return document.getElementById(id);
	}

	function readGeneral() {
		p.name = "Ozymandias";
		p.alignment = "True Neutral";
		p.level = 13;
		p.diety = "None";
		p.homeland = "Menachterun, Xen-drik";
		p.race = "Tiefling";
		p.size = "M";
		p.gender = "M";
		p.age = "Unknown";
		p.height = "68";
		p.weight = "220"; // tail adds weight
		p.hair = "Messy brown with horns"
		p.eyes = "Grey";
	}

	function readAbilites() {
		p.str = 9;
		p.dex = 16;
		p.con = 12;
		p.int = 12;
		p.wis = 10
		p.cha = 26;
	} 

	function readWeapons() {
		p.weapons = [
			{name:"Ghostly Scimitar", modifier:"+2", effects:"ghost touch", notes:"bab+dex+1, critical 18-20 (2x)", damage:"1d6+"},
		];
	}

	function readEquipment() {
		p.equipment = [
			{name:"Chainshirt", stats:"ac_+5 stealth_-1", type:"shirt", weight:"20", equipped:true},
			{name:"Ring of Protection", stats:"ac_+1", type:"ring", weight:"0", equipped:true},
			{name:"Boots of Stridening", stats:"speed_+10", type:"boots", weight:"1", equipped:true},
			{name:"Stealth Cloak", stats:"stealth_+1", type:"cloak", weight:"3", equipped:true},
			{name:"Stylish Headband", stats:"cha_+2", type:"shirt", weight:"0", equipped:true},
			{name:"Amulet of Natural Armor", stats:"ac_+1", type:"amulet", weight:"0", equipped:true},
		];
	}

	function showGeneral() {
		getId('name').innerHTML = p.name;
		getId('alignment').innerHTML = p.alignment;
		getId('level').innerHTML = p.level;
		getId('diety').innerHTML = p.diety;
		getId('homeland').innerHTML = p.homeland;
		getId('race').innerHTML = p.race;
		getId('size').innerHTML = p.size;
		getId('gender').innerHTML = p.gender;
		getId('age').innerHTML = p.age;
		getId('height').innerHTML = p.height;
		getId('weight').innerHTML = p.weight;
		getId('hair').innerHTML = p.hair;
		getId('eyes').innerHTML = p.eyes;
	}

	function showAbilities() {
		getId('str').innerHTML = p.str;
		getId('dex').innerHTML = p.dex;
		getId('con').innerHTML = p.con;
		getId('int').innerHTML = p.int;
		getId('wis').innerHTML = p.wis;
		getId('cha').innerHTML = p.cha;
	}

	function calculateAbilityModifiers() {
		function calc_am(a) {
			return Math.floor((a - 10) / 2);
		}

		getId('str-mod').innerHTML = calc_am(p.str);
		getId('dex-mod').innerHTML = calc_am(p.dex);
		getId('con-mod').innerHTML = calc_am(p.con);
		getId('int-mod').innerHTML = calc_am(p.int);
		getId('wis-mod').innerHTML = calc_am(p.wis);
		getId('cha-mod').innerHTML = calc_am(p.cha);
	}

	// Split on spaces and then on underscores. Note that stats are in the format (stat1_+2 stat2_-50)
	function calculateEquipmentModifiers() {
		for (let i = 0; i < p.equipment.length; i++) { 
  			let item = p.equipment[i];
  			let stats = item.stats.split(' ') 
  			
  			for(let j = 0; j < stats.lenght; j++) {
  				let split = stats.split('_');
  				let stat = split[0];
  				let change = split[1];
  				
  			}
		}
	}

	function refreshAll() {
		readGeneral();
		readAbilites();
		readWeapons();
		readEquipment();

		showGeneral();
		showAbilities();
		
		calculateAbilityModifiers();
		calculateEquipmentModifiers();
	}

	refreshAll();
</script>
</html>